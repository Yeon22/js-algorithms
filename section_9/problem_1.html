<html>
  <head>
    <meta charset="UTF-8" />
    <title>출력결과</title>
  </head>
  <body>
    <h1>경로 탐색(인접행렬)</h1>
    <pre>
      방향그래프가 주어지면 1번 정점에서 N번 정점으로 가는 모든 경로의 가지 수를 출력하는 프로그램을 작성하세요.
      1 -> 2
      1 -> 3
      1 -> 4
      2 -> 1
      2 -> 3
      2 -> 5
      3 -> 4
      4 -> 2
      4 -> 5
      그래프에서 1번 정점에서 5번 정점으로 가는 가지 수는
      1 2 3 4 5
      1 2 5
      1 3 4 2 5
      1 3 4 5
      1 4 2 5
      1 4 5
      총 6 가지입니다.
      
      ▣ 입력설명
      결정보가 주어진다.
      첫째 줄에는 정점의 수 N(1<=N<=20)와 간선의 수 M가 주어진다. 그 다음부터 M줄에 걸쳐 연결정보가 주어진다.
      
      ▣ 출력설명
      총 가지수를 출력한다.
      
      ▣ 입력예제 1
      5 9
      1 2
      1 3
      1 4
      2 1
      2 3
      2 5
      3 4
      4 2
      4 5
      
      ▣ 출력예제 1
      6
    </pre>
    <script>
      // n: 정점의 수, arr: 간선 정보
      function solution(arr, n) {
        let answer = 0;
        const graph = Array.from(Array(n + 1), () => Array(n + 1).fill(0)); // 6 x 6. 1~5 정점 사용할 것이기 때문에 n+1
        const ch = Array.from({ length: n + 1 }, () => 0);

        // 인접 그래프 초기화
        for (let [a, b] of arr) {
          graph[a][b] = 1;
        }

        function DFS(v) {
          if (v === n) {
            answer++; // n번 정점에 도달했을 때 가지 수 증가
          } else {
            for (let i = 1; i <= n; i++) {
              // v 정점에서 i 정점으로 갈 수 있는지, 방문하지 않았는지 체크
              if (graph[v][i] === 1 && ch[i] === 0) {
                ch[i] = 1; // i 정점 방문 체크
                DFS(i);
                ch[i] = 0; // i 정점 방문 해제 (백트래킹)
              }
            }
          }
        }
        ch[1] = 1; // 1번 정점 방문 체크
        DFS(1); // 1번 정점부터 시작

        return answer;
      }

      const arr = [
        [1, 2],
        [1, 3],
        [1, 4],
        [2, 1],
        [2, 3],
        [2, 5],
        [3, 4],
        [4, 2],
        [4, 5],
      ];
      console.log(solution(arr, 5));
    </script>
  </body>
</html>
